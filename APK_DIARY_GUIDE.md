# üöÄ APK –î–Ω–µ–≤–Ω–∏–∫ - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ-—Ä–∞–∑–Ω–æ–º—É –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã:

### üåê –í–µ–±-–≤–µ—Ä—Å–∏—è (–±—Ä–∞—É–∑–µ—Ä)
- –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è **–ª–µ–Ω–¥–∏–Ω–≥** –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
- –î–æ—Å—Ç—É–ø–Ω—ã –≤—Å–µ —Ä–∞–∑–¥–µ–ª—ã: —Å–∞–π—Ç, –∞–¥–º–∏–Ω–∫–∞, —à–∫–æ–ª—å–Ω—ã–π –ø–æ—Ä—Ç–∞–ª
- –ö–Ω–æ–ø–∫–∞ "–ù–∞ –≥–ª–∞–≤–Ω—É—é" –≤ —Ñ–æ—Ä–º–µ –≤—Ö–æ–¥–∞ ‚Üí –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ `/`

### üì± APK-–≤–µ—Ä—Å–∏—è (–º–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)
- –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Å—Ä–∞–∑—É **—Ñ–æ—Ä–º–∞ –≤—Ö–æ–¥–∞ –≤ –¥–Ω–µ–≤–Ω–∏–∫** (`/school/login`)
- –î–æ—Å—Ç—É–ø–µ–Ω **—Ç–æ–ª—å–∫–æ —à–∫–æ–ª—å–Ω—ã–π –ø–æ—Ä—Ç–∞–ª** (–¥–Ω–µ–≤–Ω–∏–∫, –æ—Ü–µ–Ω–∫–∏, —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ)
- –ö–Ω–æ–ø–∫–∞ "–û—Ç–∫—Ä—ã—Ç—å —Å–∞–π—Ç" ‚Üí –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç `https://slp23.ru` –≤ **–±—Ä–∞—É–∑–µ—Ä–µ —Ç–µ–ª–µ—Ñ–æ–Ω–∞**

---

## üìÅ –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

| –§–∞–π–ª | –ò–∑–º–µ–Ω–µ–Ω–∏—è |
|------|-----------|
| `src/hooks/use-capacitor-platform.ts` | ‚ú® –ù–æ–≤—ã–π —Ö—É–∫ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è APK |
| `src/AppCapacitor.tsx` | ‚ú® –ù–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å —Ä–æ—É—Ç–∏–Ω–≥–æ–º –¥–ª—è APK |
| `src/main.tsx` | üîß –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –≤–µ–±/APK –≤–µ—Ä—Å–∏–∏ |
| `src/pages/school/SchoolLoginPage.tsx` | üîß –ö–Ω–æ–ø–∫–∞ "–û—Ç–∫—Ä—ã—Ç—å —Å–∞–π—Ç" —Å Browser.open() |
| `capacitor.config.ts` | üîß `launchPath: '/school/login'` |
| `package.json` | ‚ûï –î–æ–±–∞–≤–ª–µ–Ω `@capacitor/browser` |

---

## üîÑ –°–±–æ—Ä–∫–∞ APK

```bash
# 1. –°–±–æ—Ä–∫–∞ –≤–µ–±-—á–∞—Å—Ç–∏
npm run build

# 2. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å Android
npx cap sync android

# 3. –û—Ç–∫—Ä—ã—Ç—å –≤ Android Studio
npx cap open android

# 4. –í Android Studio:
#    Build ‚Üí Build Bundle(s) / APK(s) ‚Üí Build APK(s)
```

**–ì–æ—Ç–æ–≤—ã–π APK:**
```
android/app/build/outputs/apk/debug/app-debug.apk
```

---

## üéØ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
src/main.tsx
     ‚îÇ
     ‚îú‚îÄ Capacitor.isNativePlatform() = true
     ‚îÇ   ‚îî‚îÄ> AppCapacitor (—Ç–æ–ª—å–∫–æ —à–∫–æ–ª—å–Ω—ã–π –ø–æ—Ä—Ç–∞–ª)
     ‚îÇ
     ‚îî‚îÄ Capacitor.isNativePlatform() = false
         ‚îî‚îÄ> App (–ø–æ–ª–Ω—ã–π —Å–∞–π—Ç)
```

### –†–æ—É—Ç–∏–Ω–≥

**–í–µ–±:**
```
/ ‚Üí –õ–µ–Ω–¥–∏–Ω–≥
/school/login ‚Üí –§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞
/school/* ‚Üí –î–Ω–µ–≤–Ω–∏–∫
/admin/* ‚Üí –ê–¥–º–∏–Ω–∫–∞
```

**APK:**
```
/ ‚Üí /school/login (—Ä–µ–¥–∏—Ä–µ–∫—Ç)
/school/login ‚Üí –§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞
/school/* ‚Üí –î–Ω–µ–≤–Ω–∏–∫
"–û—Ç–∫—Ä—ã—Ç—å —Å–∞–π—Ç" ‚Üí slp23.ru (–±—Ä–∞—É–∑–µ—Ä)
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –í –±—Ä–∞—É–∑–µ—Ä–µ (–≤–µ–±-–≤–µ—Ä—Å–∏—è)
1. `npm run dev`
2. –û—Ç–∫—Ä–æ–π—Ç–µ `http://localhost:8080`
3. ‚úÖ –î–æ–ª–∂–µ–Ω –æ—Ç–∫—Ä—ã—Ç—å—Å—è **–ª–µ–Ω–¥–∏–Ω–≥**
4. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ `/school/login`
5. –ù–∞–∂–º–∏—Ç–µ "–ù–∞ –≥–ª–∞–≤–Ω—É—é" ‚Üí –¥–æ–ª–∂–µ–Ω –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ `/`

### –í APK (–º–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)
1. –°–æ–±–µ—Ä–∏—Ç–µ APK (—Å–º. –≤—ã—à–µ)
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω
3. ‚úÖ –î–æ–ª–∂–Ω–∞ –æ—Ç–∫—Ä—ã—Ç—å—Å—è **—Ñ–æ—Ä–º–∞ –≤—Ö–æ–¥–∞**
4. –ù–∞–∂–º–∏—Ç–µ "–û—Ç–∫—Ä—ã—Ç—å —Å–∞–π—Ç" ‚Üí –¥–æ–ª–∂–µ–Ω –æ—Ç–∫—Ä—ã—Ç—å—Å—è **–±—Ä–∞—É–∑–µ—Ä** —Å slp23.ru

---

## üîë –ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –•—É–∫ `useCapacitorPlatform`
```typescript
// src/hooks/use-capacitor-platform.ts
export function useCapacitorPlatform(): boolean {
  const [isNative, setIsNative] = useState(false);
  useEffect(() => {
    setIsNative(Capacitor.isNativePlatform());
  }, []);
  return isNative;
}
```

### 2. –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –≤ `main.tsx`
```typescript
const isNative = Capacitor.isNativePlatform();

createRoot(document.getElementById("root")!).render(
  <HelmetProvider>
    {isNative ? <AppCapacitor /> : <App />}
  </HelmetProvider>
);
```

### 3. –ö–Ω–æ–ø–∫–∞ –≤ `SchoolLoginPage.tsx`
```typescript
<Button
  onClick={async () => {
    if (isCapacitor) {
      await Browser.open({ url: SITE_URL });
    } else {
      navigate("/");
    }
  }}
>
  {isCapacitor ? "–û—Ç–∫—Ä—ã—Ç—å —Å–∞–π—Ç" : "–ù–∞ –≥–ª–∞–≤–Ω—É—é"}
</Button>
```

---

## üì¶ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```json
{
  "@capacitor/browser": "^8.0.1"
}
```

---

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

- **–ù–µ —É–¥–∞–ª—è–π—Ç–µ** `App.tsx` - –æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤–µ–±-–≤–µ—Ä—Å–∏–∏
- **–ù–µ –∏–∑–º–µ–Ω—è–π—Ç–µ** –ø—É–±–ª–∏—á–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã –≤ `AppCapacitor.tsx` - –æ–Ω–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ç–æ–ª—å–∫–æ –¥–ª—è —à–∫–æ–ª—å–Ω–æ–≥–æ –ø–æ—Ä—Ç–∞–ª–∞
- **`launchPath`** –≤ `capacitor.config.ts` —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å—Ç–∞—Ä—Ç–æ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –¥–ª—è APK

---

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

- ‚úÖ **–í–µ–±**: –õ–µ–Ω–¥–∏–Ω–≥ + –∞–¥–º–∏–Ω–∫–∞ + –¥–Ω–µ–≤–Ω–∏–∫
- ‚úÖ **APK**: –¢–æ–ª—å–∫–æ –¥–Ω–µ–≤–Ω–∏–∫ (—Ñ–æ—Ä–º–∞ –≤—Ö–æ–¥–∞ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ)
- ‚úÖ **–ö–Ω–æ–ø–∫–∞ "–û—Ç–∫—Ä—ã—Ç—å —Å–∞–π—Ç"**: –í APK ‚Üí –±—Ä–∞—É–∑–µ—Ä, –≤ –≤–µ–±–µ ‚Üí –ª–µ–Ω–¥–∏–Ω–≥
