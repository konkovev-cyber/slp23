# üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–º–ø–æ—Ä—Ç–∞ –Ω–æ–≤–æ—Å—Ç–µ–π

## –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

### 1. Telegram
**URL –¥–ª—è —Ç–µ—Å—Ç–∞:** `https://t.me/slp23` (–ª—é–±–æ–π –ø–æ—Å—Ç)

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ó–∞–≥–æ–ª–æ–≤–æ–∫: –ø–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞ –ø–æ—Å—Ç–∞ (–Ω–µ "Telegram Widget")
- ‚úÖ –ö–æ–Ω—Ç–µ–Ω—Ç: —Ç–µ–∫—Å—Ç –ø–æ—Å—Ç–∞
- ‚úÖ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: –Ω–∞–π–¥–µ–Ω—ã (–µ—Å–ª–∏ –µ—Å—Ç—å)
- ‚úÖ Source: `telegram`

**–ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:**
```bash
curl -X POST http://localhost:54321/functions/v1/fetch-metadata \
  -H "Content-Type: application/json" \
  -d '{"url": "https://t.me/slp23/123"}'
```

---

### 2. VK (–ø–æ—Å—Ç—ã)
**URL –¥–ª—è —Ç–µ—Å—Ç–∞:** `https://vk.com/lichnostplus` (–ª—é–±–æ–π –ø–æ—Å—Ç)

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ó–∞–≥–æ–ª–æ–≤–æ–∫: –ø–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞ (–Ω–µ "–í–ö–æ–Ω—Ç–∞–∫—Ç–µ")
- ‚úÖ –ö–æ–Ω—Ç–µ–Ω—Ç: —Ç–µ–∫—Å—Ç –ø–æ—Å—Ç–∞
- ‚úÖ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: –Ω–∞–π–¥–µ–Ω—ã (–≤–∫–ª—é—á–∞—è data-src)
- ‚úÖ Source: `vk`

---

### 3. VK (—Å—Ç–∞—Ç—å–∏)
**URL –¥–ª—è —Ç–µ—Å—Ç–∞:** `https://vk.com/@lichnostplus-...`

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ó–∞–≥–æ–ª–æ–≤–æ–∫: –Ω–∞–∑–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—å–∏
- ‚úÖ –ö–æ–Ω—Ç–µ–Ω—Ç: –ø–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç —Å—Ç–∞—Ç—å–∏
- ‚úÖ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: –æ–±–ª–æ–∂–∫–∞ + –≤–ª–æ–∂–µ–Ω–∏—è
- ‚úÖ Source: `vk`

---

### 4. YouTube
**URL –¥–ª—è —Ç–µ—Å—Ç–∞:** `https://youtube.com/watch?v=...`

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ó–∞–≥–æ–ª–æ–≤–æ–∫: –Ω–∞–∑–≤–∞–Ω–∏–µ –≤–∏–¥–µ–æ
- ‚úÖ –ö–æ–Ω—Ç–µ–Ω—Ç: –æ–ø–∏—Å–∞–Ω–∏–µ –≤–∏–¥–µ–æ
- ‚úÖ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ: thumbnail
- ‚úÖ Source: `youtube`

---

### 5. –î–∑–µ–Ω
**URL –¥–ª—è —Ç–µ—Å—Ç–∞:** `https://zen.yandex.ru/...` –∏–ª–∏ `https://dzen.ru/...`

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ó–∞–≥–æ–ª–æ–≤–æ–∫: –Ω–∞–∑–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—å–∏
- ‚úÖ –ö–æ–Ω—Ç–µ–Ω—Ç: —Ç–µ–∫—Å—Ç —Å—Ç–∞—Ç—å–∏
- ‚úÖ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ: –æ–±–ª–æ–∂–∫–∞
- ‚úÖ Source: `zen`

---

### 6. –í–µ–±-—Å–∞–π—Ç (Open Graph)
**URL –¥–ª—è —Ç–µ—Å—Ç–∞:** –ª—é–±–æ–π –Ω–æ–≤–æ—Å—Ç–Ω–æ–π —Å–∞–π—Ç

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ó–∞–≥–æ–ª–æ–≤–æ–∫: og:title
- ‚úÖ –ö–æ–Ω—Ç–µ–Ω—Ç: og:description –∏–ª–∏ —Ç–µ–∫—Å—Ç —Å—Ç–∞—Ç—å–∏
- ‚úÖ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ: og:image
- ‚úÖ Source: `web`

---

## –ß–µ–∫-–ª–∏—Å—Ç –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

- [ ] –î–µ–ø–ª–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ —á–µ—Ä–µ–∑ Supabase Dashboard
- [ ] –¢–µ—Å—Ç Telegram (–ø–æ—Å—Ç —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º)
- [ ] –¢–µ—Å—Ç VK (–ø–æ—Å—Ç —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏)
- [ ] –¢–µ—Å—Ç VK (—Å—Ç–∞—Ç—å—è)
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ (DEBUG —Å–æ–æ–±—â–µ–Ω–∏—è)
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–æ–≤–æ—Å—Ç–∏ –≤ –ë–î
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ post_media (–≥–∞–ª–µ—Ä–µ—è)

---

## –õ–æ–≥–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

–ü–æ—Å–ª–µ –∏–º–ø–æ—Ä—Ç–∞ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Supabase Dashboard ‚Üí Edge Functions ‚Üí Logs

**–ß—Ç–æ –∏—Å–∫–∞—Ç—å:**
```
DEBUG: Telegram URL: ...
DEBUG: Extracted metadata: { title: "...", ... }
DEBUG: TG Selector: ... Match: YES
DEBUG: Found Telegram content, length: XXX
DEBUG: Media list count: X
```

–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ `Match: NO` –¥–ª—è –≤—Å–µ—Ö —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤ ‚Äî –Ω—É–∂–µ–Ω –Ω–æ–≤—ã–π —Å–µ–ª–µ–∫—Ç–æ—Ä.

---

## –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏

| –û—à–∏–±–∫–∞ | –ü—Ä–∏—á–∏–Ω–∞ | –†–µ—à–µ–Ω–∏–µ |
|--------|---------|---------|
| "–ü—É—Å—Ç–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç" | –°–µ–ª–µ–∫—Ç–æ—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω | –î–æ–±–∞–≤–∏—Ç—å —Å–µ–ª–µ–∫—Ç–æ—Ä –≤ –º–∞—Å—Å–∏–≤ |
| "–ù–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π" | –ù–æ–≤—ã–π –∞—Ç—Ä–∏–±—É—Ç | –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –≤ extractMedia |
| "–ó–∞–≥–æ–ª–æ–≤–æ–∫: –í–ö–æ–Ω—Ç–∞–∫—Ç–µ" | Generic title | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å GENERIC_TITLES |
| "HTTP 403" | –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å User-Agent |

---

## –ö–æ–Ω—Ç–∞–∫—Ç—ã

–ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö: –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ ‚Üí –Ω–∞–π—Ç–∏ —Å–µ–ª–µ–∫—Ç–æ—Ä ‚Üí –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É ‚Üí –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
